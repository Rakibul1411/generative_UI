<div class="max-w-7xl mx-auto p-6 font-sans">
  <!-- Header -->
  <div class="text-center mb-8">
    <h1 class="text-4xl md:text-5xl font-bold text-slate-800 mb-3">ğŸ¤– Generative UI Form Builder</h1>
    <p class="text-lg text-slate-600">Describe your form and let AI generate it for you!</p>
  </div>

  <!-- Input Section -->
  <div class="bg-white rounded-xl p-6 shadow-lg border border-slate-200 mb-6">
    <div class="mb-5">
      <label for="prompt" class="block text-lg font-semibold text-slate-800 mb-2">Describe your form:</label>
      <textarea
        id="prompt"
        [(ngModel)]="prompt"
        placeholder="e.g., Create a user registration form with name, email, password, age, and preferred language selection"
        rows="4"
        [disabled]="isLoading"
        class="w-full p-4 border-2 border-slate-300 rounded-lg text-base leading-relaxed transition-colors focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 disabled:bg-slate-50 disabled:cursor-not-allowed resize-y min-h-[100px]"
      ></textarea>
    </div>

    <div class="flex flex-col sm:flex-row gap-3">
      <button
        (click)="generateForm()"
        [disabled]="isLoading || !prompt.trim()"
        class="px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:-translate-y-0.5 hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2"
      >
        <span *ngIf="isLoading" class="animate-spin">â³</span>
        {{ isLoading ? 'Generating...' : 'ğŸš€ Generate Form' }}
      </button>

      <button
        (click)="clearResults()"
        *ngIf="generatedSchema || error || apiResponse"
        class="px-6 py-3 bg-slate-500 text-white font-semibold rounded-lg transition-all duration-300 hover:bg-slate-600 hover:-translate-y-0.5 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none"
        [disabled]="isLoading"
      >
        ğŸ—‘ï¸ Clear
      </button>
    </div>
  </div>

  <!-- Error Section -->
  <div *ngIf="error" class="mb-6">
    <div class="bg-red-50 border border-red-200 rounded-lg p-5 text-red-800">
      <h3 class="text-xl font-semibold mb-2">âŒ Error</h3>
      <p class="leading-relaxed">{{ error }}</p>
    </div>
  </div>

  <!-- Results Section -->
  <div *ngIf="generatedSchema" class="space-y-6">
    <!-- Form Preview -->
    <div class="bg-white rounded-xl p-6 shadow-lg border border-slate-200">
      <h2 class="text-2xl font-bold text-slate-800 mb-5">ğŸ“‹ Generated Form Preview</h2>
      <div class="border-2 border-dashed border-slate-300 rounded-lg p-6 bg-slate-50">
        <h3 class="text-xl font-semibold text-slate-800 mb-2">{{ generatedSchema.title }}</h3>
        <p class="text-slate-600 italic leading-relaxed mb-6">{{ generatedSchema.description }}</p>

        <div class="space-y-5">
          <div *ngFor="let field of generatedSchema.fields; let i = index" class="bg-white border border-slate-200 rounded-lg p-5 transition-shadow hover:shadow-md">
            <div class="flex flex-wrap items-center gap-3 mb-3">
              <span class="bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-semibold flex-shrink-0">{{ i + 1 }}</span>
              <span class="font-semibold text-slate-800 text-lg">{{ field.label }}</span>
              <span class="bg-slate-100 text-slate-700 px-2 py-1 rounded text-sm font-medium">{{ getFieldTypeDisplay(field.type) }}</span>
              <span *ngIf="field.required" class="bg-red-500 text-white px-2 py-1 rounded text-xs font-medium">Required</span>
            </div>

            <!-- Field Input Preview -->
            <div class="mt-3">
              <!-- Text inputs -->
              <input
                *ngIf="field.type === 'text' || field.type === 'email' || field.type === 'password' || field.type === 'number' || field.type === 'tel' || field.type === 'url' || field.type === 'date' || field.type === 'time' || field.type === 'datetime-local'"
                [type]="field.type"
                [placeholder]="field.placeholder || 'Enter ' + field.label.toLowerCase()"
                disabled
                class="w-full p-3 border border-slate-300 rounded-md bg-slate-50 text-slate-600 text-base"
              />

              <!-- Textarea -->
              <textarea
                *ngIf="field.type === 'textarea'"
                [placeholder]="field.placeholder || 'Enter ' + field.label.toLowerCase()"
                disabled
                rows="3"
                class="w-full p-3 border border-slate-300 rounded-md bg-slate-50 text-slate-600 text-base"
              ></textarea>

              <!-- Select dropdown -->
              <select *ngIf="field.type === 'select'" disabled class="w-full p-3 border border-slate-300 rounded-md bg-slate-50 text-slate-600 text-base">
                <option>{{ field.placeholder || 'Select ' + field.label.toLowerCase() }}</option>
                <option *ngFor="let option of field.options">{{ option }}</option>
              </select>

              <!-- Radio buttons -->
              <div *ngIf="field.type === 'radio'" class="flex flex-col space-y-2">
                <div *ngFor="let option of field.options" class="flex items-center space-x-2">
                  <input type="radio" [name]="field.name" disabled class="w-4 h-4">
                  <label class="text-slate-600 text-base cursor-not-allowed">{{ option }}</label>
                </div>
              </div>

              <!-- Checkboxes -->
              <div *ngIf="field.type === 'checkbox'" class="flex flex-col space-y-3">
                <div *ngFor="let option of field.options" class="flex items-center space-x-2">
                  <input type="checkbox" disabled class="w-4 h-4">
                  <label class="text-slate-600 text-base cursor-not-allowed">{{ option }}</label>
                </div>
              </div>

              <!-- File input -->
              <input
                *ngIf="field.type === 'file'"
                type="file"
                disabled
                class="w-full p-3 border border-slate-300 rounded-md bg-slate-50 text-slate-600 text-base"
              />

              <!-- Range slider -->
              <input
                *ngIf="field.type === 'range'"
                type="range"
                disabled
                class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-not-allowed"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JSON Response -->
    <div class="bg-white rounded-xl p-6 shadow-lg border border-slate-200">
      <h2 class="text-2xl font-bold text-slate-800 mb-5">ğŸ“„ Raw JSON Response</h2>
      <div class="bg-slate-900 rounded-lg p-5 overflow-auto">
        <pre class="text-emerald-400 font-mono text-sm leading-relaxed whitespace-pre-wrap break-words">{{ apiResponse | json }}</pre>
      </div>
    </div>

    <!-- Metadata -->
    <div *ngIf="apiResponse?.meta" class="bg-white rounded-xl p-6 shadow-lg border border-slate-200">
      <h3 class="text-xl font-semibold text-slate-800 mb-4">ğŸ“Š Generation Info</h3>
      <div class="space-y-3">
        <div class="p-3 bg-slate-50 rounded-md border-l-4 border-blue-500">
          <strong class="text-slate-800">Fields Count:</strong> <span class="text-slate-600">{{ apiResponse.meta.fieldsCount }}</span>
        </div>
        <div class="p-3 bg-slate-50 rounded-md border-l-4 border-blue-500">
          <strong class="text-slate-800">Generated At:</strong> <span class="text-slate-600">{{ apiResponse.meta.generatedAt | date:'medium' }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
